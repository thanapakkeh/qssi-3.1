
<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ú‡∏π‡πâ‡∏ï‡∏£‡∏ß‡∏à</title>
  <style>
    body { font-family: sans-serif; padding: 20px; }
    .highlight { color: red; font-weight: bold; font-size: 1.5em; }
    .section { margin-top: 20px; }
    input, select, button { padding: 8px; margin: 5px 0; font-size: 1em; }
    .result-item { margin-left: 10px; }
  </style>
</head>
<body>
  <h1>‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ú‡∏π‡πâ‡∏ï‡∏£‡∏ß‡∏à</h1>

  <div class="section">
    <label for="inspector">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡∏ï‡∏£‡∏ß‡∏à:</label><br>
    <select id="inspector"></select>
  </div>

  <div class="section">
    <label for="shopId">‡πÉ‡∏™‡πà‡∏£‡∏´‡∏±‡∏™‡∏£‡πâ‡∏≤‡∏ô:</label><br>
    <input type="text" id="shopId" placeholder="‡πÄ‡∏ä‡πà‡∏ô 12">
    <button onclick="checkData()">‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö</button>
  </div>

  <div id="result" class="section"></div>

  <script>
    let data = {};
    let data2 = {};
    let dataReady = false;

    const inspectorSelect = document.getElementById('inspector');
    const resultDiv = document.getElementById('result');
    const button = document.querySelector('button');

    button.disabled = true;
    button.textContent = '‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•...';

    Promise.all([
      fetch('data_inspectors.json').then(res => res.json()),
      fetch('data2.json').then(res => res.json())
    ]).then(([inspectors, shops]) => {
      data = inspectors;
      const names = new Set();
      for (const entries of Object.values(data)) {
        entries.forEach(item => names.add(item["‡∏ú‡∏π‡πâ‡∏ï‡∏£‡∏ß‡∏à"]));
      }
      [...names].sort().forEach(name => {
        const opt = document.createElement('option');
        opt.value = name;
        opt.textContent = name;
        inspectorSelect.appendChild(opt);
      });

      shops.forEach(item => {
        data2[item["‡∏£‡∏´‡∏±‡∏™‡∏£‡πâ‡∏≤‡∏ô"]] = item;
      });

      dataReady = true;
      button.disabled = false;
      button.textContent = '‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö';
    });
    let data2 = {};
    // ‡πÇ‡∏´‡∏•‡∏î data2.json ‡∏î‡πâ‡∏ß‡∏¢
    fetch('data2.json')
      .then(res => res.json())
      .then(json => {
        json.forEach(item => {
          data2[item["‡∏£‡∏´‡∏±‡∏™‡∏£‡πâ‡∏≤‡∏ô"]] = item;
        });
      });
    let data;
    const inspectorSelect = document.getElementById('inspector');
    const resultDiv = document.getElementById('result');

    // ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• JSON
    fetch('data_inspectors.json')
      .then(res => res.json())
      .then(json => {
        data = json;
        const names = new Set();
        for (const entries of Object.values(data)) {
          entries.forEach(item => names.add(item["‡∏ú‡∏π‡πâ‡∏ï‡∏£‡∏ß‡∏à"]));
        }
        // ‡πÉ‡∏™‡πà‡∏ä‡∏∑‡πà‡∏≠‡πÉ‡∏ô dropdown
        [...names].sort().forEach(name => {
          const opt = document.createElement('option');
          opt.value = name;
          opt.textContent = name;
          inspectorSelect.appendChild(opt);
        });
      });

    async function checkData() {
      // ‡∏£‡∏≠‡πÇ‡∏´‡∏•‡∏î data2 ‡∏ñ‡πâ‡∏≤‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÄ‡∏™‡∏£‡πá‡∏à
      if (Object.keys(data2).length === 0) {
        resultDiv.innerHTML = "<p style='color:red'>‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏£‡πâ‡∏≤‡∏ô... ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏≠‡∏™‡∏±‡∏Å‡∏Ñ‡∏£‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß‡∏Å‡∏î‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á</p>";
        return;
      }
    
      const selectedName = inspectorSelect.value;
      const shopId = document.getElementById('shopId').value.trim();
      const entries = data[shopId];

      resultDiv.innerHTML = '';

      // ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏£‡πâ‡∏≤‡∏ô‡∏à‡∏≤‡∏Å data2.json
      const shopInfo = data2[shopId];
      if (shopInfo) {
        const infoHtml = `
          <div style="border: 1px solid #ccc; padding: 10px; margin-bottom: 10px;">
            <strong>‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏≤‡∏Ç‡∏≤:</strong> ${shopInfo["‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏≤‡∏Ç‡∏≤"]} <br>
            <strong>‡∏†‡∏≤‡∏Ñ:</strong> ${shopInfo["‡∏†‡∏≤‡∏Ñ"]} |
            <strong>‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î:</strong> ${shopInfo["‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î"]} <br>
            <strong>‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞:</strong> ${shopInfo["‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞"]} |
            <strong>‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå:</strong> ${shopInfo["‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå"]} <br>
            <strong>‡∏ú‡∏π‡πâ‡∏ï‡∏£‡∏ß‡∏à‡∏õ‡∏£‡∏∞‡∏à‡∏≥:</strong> ${shopInfo["‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡∏ï‡∏£‡∏ß‡∏à"]}
          </div>`;
        resultDiv.innerHTML += infoHtml;
      }
    

      if (!entries) {
        resultDiv.innerHTML = `<p style="color:red">‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏£‡πâ‡∏≤‡∏ô‡∏ô‡∏µ‡πâ</p>`;
        return;
      }

      let count = 0;
      const list = document.createElement('ul');
      entries.forEach(item => {
        const li = document.createElement('li');
        li.innerHTML = `üìÖ ${item["‡πÄ‡∏î‡∏∑‡∏≠‡∏ô"]}: <span class="result-item">${item["‡∏ú‡∏π‡πâ‡∏ï‡∏£‡∏ß‡∏à"]}</span>`;
        if (item["‡∏ú‡∏π‡πâ‡∏ï‡∏£‡∏ß‡∏à"] === selectedName) {
          count++;
          li.querySelector('.result-item').style.color = 'red';
          li.querySelector('.result-item').style.fontWeight = 'bold';
        }
        list.appendChild(li);
      });

      resultDiv.appendChild(document.createElement('hr'));
      resultDiv.appendChild(list);

      if (count > 1) {
        const warn = document.createElement('div');
        warn.className = 'highlight';
        warn.textContent = `‚ö†Ô∏è ‡∏ä‡∏∑‡πà‡∏≠ "${selectedName}" ‡∏ã‡πâ‡∏≥ ${count} ‡πÄ‡∏î‡∏∑‡∏≠‡∏ô!`;
        resultDiv.appendChild(warn);
      }
    }
  </script>
</body>
</html>

      if (!shopInfo) {
        resultDiv.innerHTML += `<p style='color:red'>‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏£‡πâ‡∏≤‡∏ô‡∏ô‡∏µ‡πâ‡πÉ‡∏ô data2.json</p>`;
      }
